<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="postItem.meta.title">å‘å¸ƒç‰©å“ - å­¦ç”Ÿæ¸¯æ¹¾</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/pages/post-item.css">
</head>
<body>
    <!-- å¤´éƒ¨å¯¼èˆª -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="../index.html" class="logo" data-i18n-key="common.nav.logo">å­¦ç”Ÿæ¸¯æ¹¾</a>
                <nav class="nav">
                    <a href="../index.html" class="nav-link" data-i18n-key="common.nav.home">é¦–é¡µ</a>
                    <a href="items.html" class="nav-link" data-i18n-key="common.nav.items">æµè§ˆå®è´</a>
                    <a href="login.html" class="nav-link" id="loginLink" style="display: none;" data-i18n-key="common.nav.login">ç™»å½•</a>
                    <a href="register.html" class="nav-link" id="registerLink" style="display: none;" data-i18n-key="common.nav.signup">æ³¨å†Œ</a>
                    <a href="profile.html" class="nav-link" id="profileLink" data-i18n-key="common.nav.profile">ä¸ªäººèµ„æ–™</a>
                    <div class="nav-dropdown">
                        <a href="profile.html" class="nav-link" data-i18n-key="common.nav.profileDropdown">ä¸ªäººä¸­å¿ƒ â–¾</a>
                        <div class="dropdown-menu">
                            <a href="my-items.html" class="dropdown-item" data-i18n-key="common.nav.myItems">æˆ‘çš„å®è´</a>
                            <a href="post-item.html" class="dropdown-item active" data-i18n-key="common.nav.postItem">å‘å¸ƒç‰©å“</a>
                        </div>
                    </div>
                    <a href="#" class="nav-link" id="logoutLink" data-i18n-key="common.nav.logout">é€€å‡ºç™»å½•</a>
                    <button type="button" class="lang-toggle" id="languageToggle" data-i18n-aria-label-key="common.langToggle">EN</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹ -->
    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title" data-i18n-key="postItem.hero.title">å‘å¸ƒç‰©å“</h1>
                <p class="page-subtitle" data-i18n-key="postItem.hero.subtitle">å‡ºå”®æ‚¨çš„äºŒæ‰‹ç‰©å“ï¼Œè®©å®ƒä»¬æ‰¾åˆ°æ–°ä¸»äºº</p>
            </div>

            <div class="post-item-container">
                <form id="postItemForm" class="post-item-form">
                    <!-- åŸºæœ¬ä¿¡æ¯ -->
                    <div class="form-section">
                        <h2 class="section-title" data-i18n-key="postItem.form.basicInfo">åŸºæœ¬ä¿¡æ¯</h2>
                        
                        <div class="form-group">
                            <label for="category" class="form-label" data-i18n-key="postItem.form.categoryLabel">ç‰©å“ç±»åˆ« <span class="required">*</span></label>
                            <select id="category" name="category" class="form-control" required>
                                <option value="" data-i18n-key="postItem.form.categoryPlaceholder">è¯·é€‰æ‹©ç±»åˆ«</option>
                                <option value="TEXTBOOK" data-i18n-key="postItem.category.textbook">ğŸ“š æ•™æ</option>
                                <option value="ELECTRONICS" data-i18n-key="postItem.category.electronics">ğŸ’» ç”µå­äº§å“</option>
                                <option value="FURNITURE" data-i18n-key="postItem.category.furniture">ğŸª‘ å®¶å…·</option>
                                <option value="APPAREL" data-i18n-key="postItem.category.apparel">ğŸ‘• æœè£…</option>
                                <option value="SPORTS" data-i18n-key="postItem.category.sports">âš½ ä½“è‚²å™¨æ</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="title" class="form-label" data-i18n-key="postItem.form.titleLabel">ç‰©å“æ ‡é¢˜ <span class="required">*</span></label>
                            <input 
                                type="text" 
                                id="title" 
                                name="title" 
                                class="form-control" 
                                data-i18n-placeholder-key="postItem.form.titlePlaceholder"
                                placeholder="ä¾‹å¦‚ï¼šé«˜ç­‰æ•°å­¦æ•™æ ç¬¬3ç‰ˆ"
                                required
                                maxlength="100"
                            >
                        </div>

                        <div class="form-group">
                            <label for="description" class="form-label" data-i18n-key="postItem.form.descriptionLabel">è¯¦ç»†æè¿° <span class="required">*</span></label>
                            <textarea 
                                id="description" 
                                name="description" 
                                class="form-control" 
                                rows="6"
                                data-i18n-placeholder-key="postItem.form.descriptionPlaceholder"
                                placeholder="è¯·è¯¦ç»†æè¿°ç‰©å“çš„çŠ¶å†µã€ä½¿ç”¨æƒ…å†µã€è´­ä¹°æ—¶é—´ç­‰ä¿¡æ¯..."
                                required
                                maxlength="2000"
                            ></textarea>
                            <div class="form-help" data-i18n-key="postItem.form.descriptionHelp">æœ€å¤š2000å­—</div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="price" class="form-label" data-i18n-key="postItem.form.priceLabel">ä»·æ ¼ <span class="required">*</span></label>
                                <div class="price-input-group">
                                    <span class="price-symbol">Â¥</span>
                                    <input 
                                        type="number" 
                                        id="price" 
                                        name="price" 
                                        class="form-control" 
                                        placeholder="0.00"
                                        min="0"
                                        step="0.01"
                                        required
                                    >
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="condition" class="form-label" data-i18n-key="postItem.form.conditionLabel">ç‰©å“çŠ¶å†µ <span class="required">*</span></label>
                                <select id="condition" name="condition" class="form-control" required>
                                    <option value="" data-i18n-key="postItem.form.conditionPlaceholder">è¯·é€‰æ‹©çŠ¶å†µ</option>
                                    <option value="NEW" data-i18n-key="postItem.condition.new">å…¨æ–°</option>
                                    <option value="LIKE_NEW" data-i18n-key="postItem.condition.likeNew">å‡ ä¹å…¨æ–°</option>
                                    <option value="GOOD" data-i18n-key="postItem.condition.good">è‰¯å¥½</option>
                                    <option value="FAIR" data-i18n-key="postItem.condition.fair">ä¸€èˆ¬</option>
                                    <option value="POOR" data-i18n-key="postItem.condition.poor">è¾ƒå·®</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- ç±»åˆ«ç‰¹å®šå­—æ®µ -->
                    <div id="categoryFields" class="form-section" style="display: none;">
                        <h2 class="section-title" data-i18n-key="postItem.form.detailsInfo">è¯¦ç»†ä¿¡æ¯</h2>
                        <div id="categoryFieldsContent">
                            <!-- åŠ¨æ€åŠ è½½çš„å­—æ®µ -->
                        </div>
                    </div>

                    <!-- å›¾ç‰‡ä¸Šä¼  -->
                    <div class="form-section">
                        <h2 class="section-title" data-i18n-key="postItem.form.imagesTitle">ç‰©å“å›¾ç‰‡</h2>
                        <div class="form-group">
                            <label class="form-label" data-i18n-key="postItem.form.imagesLabel">ä¸Šä¼ å›¾ç‰‡ <span class="required">*</span></label>
                            <div class="image-upload-area">
                                <input 
                                    type="file" 
                                    id="imageInput" 
                                    accept="image/*" 
                                    multiple
                                    style="display: none;"
                                >
                                <div class="image-upload-grid" id="imagePreviewGrid">
                                    <div class="image-upload-item image-upload-placeholder" id="uploadTrigger">
                                        <div class="upload-icon">ğŸ“·</div>
                                        <div class="upload-text" data-i18n-key="postItem.form.uploadText">ç‚¹å‡»ä¸Šä¼ </div>
                                        <div class="upload-hint" data-i18n-key="postItem.form.uploadHint">æœ€å¤š5å¼ å›¾ç‰‡</div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-help" data-i18n-key="postItem.form.imagesHelp">æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œæ¯å¼ å›¾ç‰‡ä¸è¶…è¿‡ 5MBï¼Œæœ€å¤šä¸Šä¼  5 å¼ </div>
                        </div>
                    </div>

                    <!-- æäº¤æŒ‰é’® -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-lg" data-i18n-key="postItem.form.submit">å‘å¸ƒç‰©å“</button>
                        <button type="button" class="btn btn-secondary btn-lg" onclick="window.history.back()" data-i18n-key="common.actions.cancel">å–æ¶ˆ</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p data-i18n-key="common.footer.default">&copy; 2024 å­¦ç”Ÿæ¸¯æ¹¾. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="../js/utils/i18n.data.js"></script>
    <script src="../js/utils/i18n.js"></script>
    <script src="../js/utils/auth.js"></script>
    <script src="../js/utils/api.js"></script>
    <script src="../js/utils/navigation.js"></script>
    <script src="../js/utils/validation.js"></script>
    <script src="../js/pages/post-item.js"></script>
    <script>
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        document.addEventListener('DOMContentLoaded', function() {
            updateNavigation();
            
            if (!isAuthenticated()) {
                alert(I18n.t('postItem.alert.loginRequired', 'è¯·å…ˆç™»å½•åå†å‘å¸ƒç‰©å“'));
                window.location.href = 'login.html';
                return;
            }
            
            // é€€å‡ºç™»å½•
            const logoutLink = document.getElementById('logoutLink');
            if (logoutLink) {
                logoutLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (confirm(I18n.t('common.logoutConfirm'))) {
                        clearAuth();
                        updateNavigation();
                        window.location.href = '../index.html';
                    }
                });
            }
        });
    </script>
</body>
</html>

