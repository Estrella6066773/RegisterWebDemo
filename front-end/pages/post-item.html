<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘å¸ƒç‰©å“ - å­¦ç”Ÿæ¸¯æ¹¾</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/pages/post-item.css">
</head>
<body>
    <!-- å¤´éƒ¨å¯¼èˆª -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="../index.html" class="logo">å­¦ç”Ÿæ¸¯æ¹¾</a>
                <nav class="nav">
                    <a href="../index.html" class="nav-link">é¦–é¡µ</a>
                    <a href="items.html" class="nav-link">æµè§ˆå®è´</a>
                    <a href="login.html" class="nav-link" id="loginLink" style="display: none;">ç™»å½•</a>
                    <a href="register.html" class="nav-link" id="registerLink" style="display: none;">æ³¨å†Œ</a>
                    <a href="profile.html" class="nav-link" id="profileLink">ä¸ªäººèµ„æ–™</a>
                    <div class="nav-dropdown">
                        <a href="profile.html" class="nav-link">ä¸ªäººä¸­å¿ƒ â–¾</a>
                        <div class="dropdown-menu">
                            <a href="my-items.html" class="dropdown-item">æˆ‘çš„å®è´</a>
                            <a href="post-item.html" class="dropdown-item active">å‘å¸ƒç‰©å“</a>
                        </div>
                    </div>
                    <a href="#" class="nav-link" id="logoutLink">é€€å‡ºç™»å½•</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹ -->
    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">å‘å¸ƒç‰©å“</h1>
                <p class="page-subtitle">å‡ºå”®æ‚¨çš„äºŒæ‰‹ç‰©å“ï¼Œè®©å®ƒä»¬æ‰¾åˆ°æ–°ä¸»äºº</p>
            </div>

            <div class="post-item-container">
                <form id="postItemForm" class="post-item-form">
                    <!-- åŸºæœ¬ä¿¡æ¯ -->
                    <div class="form-section">
                        <h2 class="section-title">åŸºæœ¬ä¿¡æ¯</h2>
                        
                        <div class="form-group">
                            <label for="category" class="form-label">ç‰©å“ç±»åˆ« <span class="required">*</span></label>
                            <select id="category" name="category" class="form-control" required>
                                <option value="">è¯·é€‰æ‹©ç±»åˆ«</option>
                                <option value="TEXTBOOK">ğŸ“š æ•™æ</option>
                                <option value="ELECTRONICS">ğŸ’» ç”µå­äº§å“</option>
                                <option value="FURNITURE">ğŸª‘ å®¶å…·</option>
                                <option value="APPAREL">ğŸ‘• æœè£…</option>
                                <option value="SPORTS">âš½ ä½“è‚²å™¨æ</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="title" class="form-label">ç‰©å“æ ‡é¢˜ <span class="required">*</span></label>
                            <input 
                                type="text" 
                                id="title" 
                                name="title" 
                                class="form-control" 
                                placeholder="ä¾‹å¦‚ï¼šé«˜ç­‰æ•°å­¦æ•™æ ç¬¬3ç‰ˆ"
                                required
                                maxlength="100"
                            >
                        </div>

                        <div class="form-group">
                            <label for="description" class="form-label">è¯¦ç»†æè¿° <span class="required">*</span></label>
                            <textarea 
                                id="description" 
                                name="description" 
                                class="form-control" 
                                rows="6"
                                placeholder="è¯·è¯¦ç»†æè¿°ç‰©å“çš„çŠ¶å†µã€ä½¿ç”¨æƒ…å†µã€è´­ä¹°æ—¶é—´ç­‰ä¿¡æ¯..."
                                required
                                maxlength="2000"
                            ></textarea>
                            <div class="form-help">æœ€å¤š2000å­—</div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="price" class="form-label">ä»·æ ¼ <span class="required">*</span></label>
                                <div class="price-input-group">
                                    <span class="price-symbol">Â¥</span>
                                    <input 
                                        type="number" 
                                        id="price" 
                                        name="price" 
                                        class="form-control" 
                                        placeholder="0.00"
                                        min="0"
                                        step="0.01"
                                        required
                                    >
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="condition" class="form-label">ç‰©å“çŠ¶å†µ <span class="required">*</span></label>
                                <select id="condition" name="condition" class="form-control" required>
                                    <option value="">è¯·é€‰æ‹©çŠ¶å†µ</option>
                                    <option value="NEW">å…¨æ–°</option>
                                    <option value="LIKE_NEW">å‡ ä¹å…¨æ–°</option>
                                    <option value="GOOD">è‰¯å¥½</option>
                                    <option value="FAIR">ä¸€èˆ¬</option>
                                    <option value="POOR">è¾ƒå·®</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- ç±»åˆ«ç‰¹å®šå­—æ®µ -->
                    <div id="categoryFields" class="form-section" style="display: none;">
                        <h2 class="section-title">è¯¦ç»†ä¿¡æ¯</h2>
                        <div id="categoryFieldsContent">
                            <!-- åŠ¨æ€åŠ è½½çš„å­—æ®µ -->
                        </div>
                    </div>

                    <!-- å›¾ç‰‡ä¸Šä¼  -->
                    <div class="form-section">
                        <h2 class="section-title">ç‰©å“å›¾ç‰‡</h2>
                        <div class="form-group">
                            <label class="form-label">ä¸Šä¼ å›¾ç‰‡ <span class="required">*</span></label>
                            <div class="image-upload-area">
                                <input 
                                    type="file" 
                                    id="imageInput" 
                                    accept="image/*" 
                                    multiple
                                    style="display: none;"
                                >
                                <div class="image-upload-grid" id="imagePreviewGrid">
                                    <div class="image-upload-item image-upload-placeholder" id="uploadTrigger">
                                        <div class="upload-icon">ğŸ“·</div>
                                        <div class="upload-text">ç‚¹å‡»ä¸Šä¼ </div>
                                        <div class="upload-hint">æœ€å¤š5å¼ å›¾ç‰‡</div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-help">æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œæ¯å¼ å›¾ç‰‡ä¸è¶…è¿‡ 5MBï¼Œæœ€å¤šä¸Šä¼  5 å¼ </div>
                        </div>
                    </div>

                    <!-- æäº¤æŒ‰é’® -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-lg">å‘å¸ƒç‰©å“</button>
                        <button type="button" class="btn btn-secondary btn-lg" onclick="window.history.back()">å–æ¶ˆ</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 å­¦ç”Ÿæ¸¯æ¹¾. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="../js/utils/auth.js"></script>
    <script src="../js/utils/api.js"></script>
    <script src="../js/utils/navigation.js"></script>
    <script src="../js/utils/validation.js"></script>
    <script src="../js/pages/post-item.js"></script>
    <script>
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        document.addEventListener('DOMContentLoaded', function() {
            updateNavigation();
            
            if (!isAuthenticated()) {
                alert('è¯·å…ˆç™»å½•åå†å‘å¸ƒç‰©å“');
                window.location.href = 'login.html';
                return;
            }
            
            // é€€å‡ºç™»å½•
            const logoutLink = document.getElementById('logoutLink');
            if (logoutLink) {
                logoutLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                        clearAuth();
                        updateNavigation();
                        window.location.href = '../index.html';
                    }
                });
            }
        });
    </script>
</body>
</html>

