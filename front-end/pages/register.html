<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¨å†Œ - å­¦ç”Ÿæ¸¯æ¹¾</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/pages/register.css">
</head>
<body>
    <!-- å¤´éƒ¨å¯¼èˆª -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="../index.html" class="logo">å­¦ç”Ÿæ¸¯æ¹¾</a>
                <nav class="nav">
                    <a href="../index.html" class="nav-link">é¦–é¡µ</a>
                    <a href="items.html" class="nav-link">æµè§ˆå®è´</a>
                    <a href="login.html" class="nav-link" id="loginLink">ç™»å½•</a>
                    <a href="register.html" class="nav-link active" id="registerLink">æ³¨å†Œ</a>
                    <a href="profile.html" class="nav-link" id="profileLink" style="display: none;">ä¸ªäººèµ„æ–™</a>
                    <div class="nav-dropdown" style="display: none;">
                        <a href="profile.html" class="nav-link">ä¸ªäººä¸­å¿ƒ â–¾</a>
                        <div class="dropdown-menu">
                            <a href="my-items.html" class="dropdown-item">æˆ‘çš„å®è´</a>
                            <a href="post-item.html" class="dropdown-item">å‘å¸ƒç‰©å“</a>
                        </div>
                    </div>
                    <a href="#" class="nav-link" id="logoutLink" style="display: none;">é€€å‡ºç™»å½•</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹ -->
    <main class="main-content">
        <div class="container">
            <div class="register-container">
                <div class="register-card">
                    <div class="register-header">
                        <h1 class="register-title">åŠ å…¥å­¦ç”Ÿæ¸¯æ¹¾</h1>
                        <p class="register-subtitle">åˆ›å»ºæ‚¨çš„è´¦æˆ·ï¼Œå¼€å§‹ä¹°å–äºŒæ‰‹ç‰©å“</p>
                    </div>

                    <!-- ä¼šå‘˜ç±»å‹é€‰æ‹© -->
                    <div class="member-type-selector">
                        <label class="form-label">é€‰æ‹©ä¼šå‘˜ç±»å‹ <span class="required">*</span></label>
                        <div class="member-type-options">
                            <!-- å­¦ç”Ÿä¼šå‘˜ -->
                            <div class="member-type-card" data-type="STUDENT">
                                <input type="radio" name="memberType" value="STUDENT" id="typeStudent">
                                <div class="member-type-icon">ğŸ“</div>
                                <div class="member-type-name">å­¦ç”Ÿä¼šå‘˜</div>
                                <div class="member-type-desc">å®Œæ•´ä¹°å–æƒé™ï¼Œéœ€å¤§å­¦é‚®ç®±éªŒè¯</div>
                                <div class="member-type-badge badge badge-member-student">å®Œæ•´æƒé™</div>
                            </div>

                            <!-- å…³è”ä¼šå‘˜ -->
                            <div class="member-type-card" data-type="ASSOCIATE">
                                <input type="radio" name="memberType" value="ASSOCIATE" id="typeAssociate">
                                <div class="member-type-icon">ğŸ‘”</div>
                                <div class="member-type-name">å…³è”ä¼šå‘˜</div>
                                <div class="member-type-desc">æ•™èŒå·¥ï¼Œå®Œæ•´ä¹°å–æƒé™ï¼Œéœ€æœºæ„é‚®ç®±éªŒè¯</div>
                                <div class="member-type-badge badge badge-member-associate">å®Œæ•´æƒé™</div>
                            </div>
                        </div>
                        <input type="hidden" id="memberType" name="memberType" value="">
                    </div>

                    <!-- é‚®ç®±éªŒè¯æç¤º -->
                    <div class="email-verification-notice" style="display: none;">
                        <span class="notice-icon">â„¹ï¸</span>
                        <span class="notice-text">å¤§å­¦é‚®ç®±éªŒè¯æ˜¯å¿…éœ€çš„ï¼Œæˆ‘ä»¬å°†å‘æ‚¨çš„é‚®ç®±å‘é€éªŒè¯é“¾æ¥ã€‚</span>
                    </div>

                    <!-- æ³¨å†Œè¡¨å• -->
                    <form id="registerForm" class="register-form">
                        <!-- æ­¥éª¤1: åŸºæœ¬ä¿¡æ¯ -->
                        <div class="form-step-content active" data-step="1">
                            <div class="form-group">
                                <label for="email" class="form-label">é‚®ç®±åœ°å€ <span class="required">*</span></label>
                                <input 
                                    type="email" 
                                    id="email" 
                                    name="email" 
                                    class="form-control" 
                                    placeholder="example@university.edu"
                                    required
                                >
                                <div class="form-help">å­¦ç”Ÿä¼šå‘˜å’Œå…³è”ä¼šå‘˜è¯·ä½¿ç”¨å¤§å­¦æˆ–æœºæ„é‚®ç®±</div>
                            </div>

                            <div class="form-group">
                                <label for="password" class="form-label">å¯†ç  <span class="required">*</span></label>
                                <input 
                                    type="password" 
                                    id="password" 
                                    name="password" 
                                    class="form-control" 
                                    placeholder="è‡³å°‘8ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—"
                                    required
                                >
                            </div>

                            <div class="form-group">
                                <label for="confirmPassword" class="form-label">ç¡®è®¤å¯†ç  <span class="required">*</span></label>
                                <input 
                                    type="password" 
                                    id="confirmPassword" 
                                    name="confirmPassword" 
                                    class="form-control" 
                                    placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç "
                                    required
                                >
                            </div>
                        </div>

                        <!-- æ­¥éª¤2: ä¸ªäººä¿¡æ¯ï¼ˆå¯é€‰ï¼‰ -->
                        <div class="form-step-content" data-step="2">
                            <div class="form-group">
                                <label for="name" class="form-label">å§“å</label>
                                <input 
                                    type="text" 
                                    id="name" 
                                    name="name" 
                                    class="form-control" 
                                    placeholder="æ‚¨çš„çœŸå®å§“åï¼ˆå¯é€‰ï¼‰"
                                >
                            </div>

                            <div class="form-group">
                                <label for="university" class="form-label">å¤§å­¦</label>
                                <input 
                                    type="text" 
                                    id="university" 
                                    name="university" 
                                    class="form-control" 
                                    placeholder="æ‚¨æ‰€åœ¨çš„å¤§å­¦ï¼ˆå¯é€‰ï¼‰"
                                >
                            </div>

                            <div class="form-group">
                                <label for="enrollmentYear" class="form-label">å…¥å­¦å¹´ä»½</label>
                                <input 
                                    type="number" 
                                    id="enrollmentYear" 
                                    name="enrollmentYear" 
                                    class="form-control" 
                                    placeholder="ä¾‹å¦‚ï¼š2024"
                                    min="2000"
                                    max="2099"
                                >
                            </div>
                        </div>

                        <!-- æäº¤æŒ‰é’® -->
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary btn-block">æ³¨å†Œ</button>
                        </div>

                        <div class="text-center mt-md">
                            <p style="color: var(--text-secondary); font-size: 14px;">
                                å·²æœ‰è´¦æˆ·ï¼Ÿ<a href="login.html" style="color: var(--primary-color);">ç«‹å³ç™»å½•</a>
                            </p>
                        </div>
                    </form>

                    <!-- æµ‹è¯•è´¦å·è¯´æ˜ -->
                    <div class="test-accounts-info" style="background-color: #f0f7ff; border: 1px solid #4A90E2; border-radius: 8px; padding: 16px; margin-top: 24px;">
                        <div style="display: flex; align-items: center; margin-bottom: 12px;">
                            <span style="font-size: 20px; margin-right: 8px;">ğŸ§ª</span>
                            <h3 style="margin: 0; font-size: 16px; color: var(--primary-color);">æµ‹è¯•è´¦å·</h3>
                        </div>
                        <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 12px;">
                            <p style="margin: 0 0 8px 0;">ä»¥ä¸‹ä¸ºé¡¹ç›®æµ‹è¯•è´¦å·ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼š</p>
                        </div>
                        <div class="test-accounts-list" style="display: flex; flex-direction: column; gap: 8px;">
                            <!-- å­¦ç”Ÿä¼šå‘˜ 1 -->
                            <div class="test-account-item" style="background: white; padding: 12px; border-radius: 6px; border: 1px solid #e0e0e0;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div style="flex: 1;">
                                        <div style="font-weight: 500; margin-bottom: 4px;">å­¦ç”Ÿä¼šå‘˜ 1</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">
                                            é‚®ç®±: <code style="background: #f5f5f5; padding: 2px 6px; border-radius: 3px;">student@university.edu</code>
                                        </div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">
                                            å¯†ç : <code style="background: #f5f5f5; padding: 2px 6px; border-radius: 3px;">Test1234</code>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="fillTestAccount('student@university.edu', 'Test1234', 'STUDENT')" style="margin-left: 12px; white-space: nowrap;">ä¸€é”®å¡«å†™</button>
                                </div>
                            </div>
                            <!-- å…³è”ä¼šå‘˜ 1 -->
                            <div class="test-account-item" style="background: white; padding: 12px; border-radius: 6px; border: 1px solid #e0e0e0;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div style="flex: 1;">
                                        <div style="font-weight: 500; margin-bottom: 4px;">å…³è”ä¼šå‘˜ 1</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">
                                            é‚®ç®±: <code style="background: #f5f5f5; padding: 2px 6px; border-radius: 3px;">associate@university.edu</code>
                                        </div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">
                                            å¯†ç : <code style="background: #f5f5f5; padding: 2px 6px; border-radius: 3px;">Test1234</code>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="fillTestAccount('associate@university.edu', 'Test1234', 'ASSOCIATE')" style="margin-left: 12px; white-space: nowrap;">ä¸€é”®å¡«å†™</button>
                                </div>
                            </div>
                            <!-- å­¦ç”Ÿä¼šå‘˜ 2 -->
                            <div class="test-account-item" style="background: white; padding: 12px; border-radius: 6px; border: 1px solid #e0e0e0;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div style="flex: 1;">
                                        <div style="font-weight: 500; margin-bottom: 4px;">å­¦ç”Ÿä¼šå‘˜ 2</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">
                                            é‚®ç®±: <code style="background: #f5f5f5; padding: 2px 6px; border-radius: 3px;">student2@university.edu</code>
                                        </div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">
                                            å¯†ç : <code style="background: #f5f5f5; padding: 2px 6px; border-radius: 3px;">Test1234</code>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="fillTestAccount('student2@university.edu', 'Test1234', 'STUDENT')" style="margin-left: 12px; white-space: nowrap;">ä¸€é”®å¡«å†™</button>
                                </div>
                            </div>
                            <!-- å…³è”ä¼šå‘˜ 2 -->
                            <div class="test-account-item" style="background: white; padding: 12px; border-radius: 6px; border: 1px solid #e0e0e0;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div style="flex: 1;">
                                        <div style="font-weight: 500; margin-bottom: 4px;">å…³è”ä¼šå‘˜ 2</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">
                                            é‚®ç®±: <code style="background: #f5f5f5; padding: 2px 6px; border-radius: 3px;">associate2@university.edu</code>
                                        </div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">
                                            å¯†ç : <code style="background: #f5f5f5; padding: 2px 6px; border-radius: 3px;">Test1234</code>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="fillTestAccount('associate2@university.edu', 'Test1234', 'ASSOCIATE')" style="margin-left: 12px; white-space: nowrap;">ä¸€é”®å¡«å†™</button>
                                </div>
                            </div>
                            <!-- é€šç”¨æµ‹è¯•è´¦å· -->
                            <div class="test-account-item" style="background: white; padding: 12px; border-radius: 6px; border: 1px solid #e0e0e0;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div style="flex: 1;">
                                        <div style="font-weight: 500; margin-bottom: 4px;">é€šç”¨æµ‹è¯•è´¦å·</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">
                                            é‚®ç®±: <code style="background: #f5f5f5; padding: 2px 6px; border-radius: 3px;">test@university.edu</code>
                                        </div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">
                                            å¯†ç : <code style="background: #f5f5f5; padding: 2px 6px; border-radius: 3px;">Test1234</code>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="fillTestAccount('test@university.edu', 'Test1234', 'STUDENT')" style="margin-left: 12px; white-space: nowrap;">ä¸€é”®å¡«å†™</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 å­¦ç”Ÿæ¸¯æ¹¾. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="../js/utils/validation.js"></script>
    <script src="../js/utils/auth.js"></script>
    <script src="../js/utils/api.js"></script>
    <script src="../js/utils/navigation.js"></script>
    <script src="../js/pages/register.js"></script>
    <script>
        // ä¸€é”®å¡«å†™æµ‹è¯•è´¦å·ï¼ˆæ³¨å†Œé¡µé¢ï¼‰
        function fillTestAccount(email, password, memberType) {
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirmPassword');
            const memberTypeInput = document.getElementById('memberType');
            
            if (emailInput) emailInput.value = email;
            if (passwordInput) passwordInput.value = password;
            if (confirmPasswordInput) confirmPasswordInput.value = password;
            
            // é€‰æ‹©ä¼šå‘˜ç±»å‹
            if (memberType) {
                // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
                const memberTypeCards = document.querySelectorAll('.member-type-card');
                memberTypeCards.forEach(c => c.classList.remove('selected'));
                
                if (memberType === 'STUDENT') {
                    const studentCard = document.querySelector('[data-type="STUDENT"]');
                    const studentRadio = document.getElementById('typeStudent');
                    if (studentCard && studentRadio) {
                        studentCard.classList.add('selected');
                        studentRadio.checked = true;
                        if (memberTypeInput) memberTypeInput.value = 'STUDENT';
                        
                        // è§¦å‘é‚®ç®±éªŒè¯æç¤ºæ›´æ–°
                        if (typeof updateEmailVerificationNotice === 'function') {
                            updateEmailVerificationNotice('STUDENT');
                        }
                    }
                } else if (memberType === 'ASSOCIATE') {
                    const associateCard = document.querySelector('[data-type="ASSOCIATE"]');
                    const associateRadio = document.getElementById('typeAssociate');
                    if (associateCard && associateRadio) {
                        associateCard.classList.add('selected');
                        associateRadio.checked = true;
                        if (memberTypeInput) memberTypeInput.value = 'ASSOCIATE';
                        
                        // è§¦å‘é‚®ç®±éªŒè¯æç¤ºæ›´æ–°
                        if (typeof updateEmailVerificationNotice === 'function') {
                            updateEmailVerificationNotice('ASSOCIATE');
                        }
                    }
                }
            }
        }
        
        // é€€å‡ºç™»å½•
        document.addEventListener('DOMContentLoaded', function() {
            const logoutLink = document.getElementById('logoutLink');
            if (logoutLink) {
                logoutLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                        clearAuth();
                        updateNavigation();
                        window.location.href = '../index.html';
                    }
                });
            }
        });
    </script>
</body>
</html>

